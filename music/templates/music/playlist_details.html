{% extends "accounts/base.html" %}

{% block title %}
{{ playlist.title }}
{% endblock title %}

{% block content %}
<div class="container py-5">

    <!-- Playlist Info Card -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h2 class="card-title mb-2">{{ playlist.title }}</h2>
            <hr>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <strong>Owner:</strong> {{ playlist.owner.username }}
                </li>
                <li class="list-group-item">
                    <strong>Date Created:</strong> {{ playlist.created_on|date:"M d, Y" }}
                </li>
            </ul>
            {% if request.user.id == playlist.owner.id %}
            <div class="mt-3 d-flex gap-2">
                <a href="{% url 'music:playlist-update' playlist.id %}" class="btn btn-primary">
                    Update Playlist
                </a>
                <a href="{% url 'music:playlist-delete' playlist.id %}" class="btn btn-danger">
                    Delete Playlist
                </a>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Songs Associated with Playlist -->
    <div class="card shadow-sm">
        <div class="card-body">
            <h4 class="mb-3">Songs</h4>
            <hr>
            {% if playlist.songs.all %}
                <ul class="list-group">
                    {% for song in playlist.songs.all %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            {{ song.title }}
                            <a href="{% url 'music:song-details' song.id %}" class="btn btn-sm btn-outline-primary">
                                View
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p><em>No songs have been added to this playlist yet.</em></p>
            {% endif %}
        </div>
    </div>

</div>
{% endblock content %}
